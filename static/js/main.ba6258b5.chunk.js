(this["webpackJsonpdice-game"]=this["webpackJsonpdice-game"]||[]).push([[0],{185:function(e,t,n){},187:function(e,t,n){},326:function(e,t,n){"use strict";n.r(t);var c=n(10),a=n(0),r=n.n(a),i=n(21),o=n.n(i),s=(n(185),n(186),n(187),n(88)),l=n(33),u=n(79),d=n(332),j=n(127),b=function(e){var t=Object(a.useState)([320,300]),n=Object(l.a)(t,2),c=n[0],r=n[1],i=function(){e&&r([e.clientWidth,e.clientHeight])};return Object(a.useEffect)((function(){return window.addEventListener("resize",i),i(),function(){return window.removeEventListener("resize",i)}}),[e]),c},f=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Object(a.useState)({lifeTime:e,delay:t}),i=Object(l.a)(r,2),o=i[0],s=i[1],u=Object(a.useState)(0),d=Object(l.a)(u,2),j=d[0],b=d[1],f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){return clearTimeout(e)}))},O=function(){s((function(e){var t=e.lifeTime,n=e.delay;return{lifeTime:t-((new Date).getTime()-j),delay:n-((new Date).getTime()-j)}}))};Object(a.useEffect)((function(){var e,t;return e=setTimeout((function(){b((new Date).getTime()),t=setTimeout((function(){n(),clearTimeout(t)}),o.lifeTime)}),o.delay),c&&(f([e,t]),O()),function(){f([e,t])}}),[c])},O=function(e,t){return Math.random()*(t-e)+e},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},x="Anonymous",v=function(e){var t=e.lifeTime,n=void 0===t?1e3:t,i=e.points,o=e.delay,s=void 0===o?10:o,u=e.pos,d=e.onDisappear,j=e.freeze,b=e.scaleRatio,O=e.onClick,m=e.color,x=r.a.createRef(),v=r.a.createRef(),p=Object(a.useState)(!1),h=Object(l.a)(p,2),y=h[0],g=h[1],S=Object(a.useState)(!0),_=Object(l.a)(S,2),w=_[0],N=_[1];f(n,s,(function(){return N(!1)}),j),Object(a.useEffect)((function(){var e=x.current;j||!w&&w?!j||!w&&w||(e.style.animationPlayState="paused"):e.style.animationPlayState="running"}),[j,x,w]);var T={backgroundColor:m,left:u.x,top:u.y,width:50/b,height:50/b},k="dice ".concat(w?"dice_appear":"dice_disappear"),E=function(e){e.preventDefault(),j||y||(x.current.style.backgroundColor="#ff0000",g(!0),N(!1),O(i),v.current.classList.add("dice__points_show"))};return Object(c.jsx)("div",{ref:x,onClick:E,onTouchStart:E,onAnimationEnd:function(){d&&!w&&d()},style:T,className:k,children:Object(c.jsxs)("span",{ref:v,className:"dice__points",children:["+ ",i]})})},p=n(50),h=n(330),y=[{points:3,scaleRatio:4},{points:2,scaleRatio:2},{points:1,scaleRatio:1}],g=[15,50,100],S=function(e){var t=e.isActive,n=e.shouldReplay,r=e.onScoreChange,i=Object(a.useRef)(null),o=Object(a.useState)([]),u=Object(l.a)(o,2),d=u[0],f=u[1],x=b(i.current),S=function(e){var t,n,c=50/e,a=!0,r=20;do{var i=Object(l.a)(x,2),o=i[0],s=i[1],u=[O(0,o-c),O(0,s-c)];t=u[0],n=u[1],a=d.some((function(e){var c=e.pos;return m(c,{x:t,y:n})<75}))}while(a||--r);return{x:t,y:n}},_=function(){var e=d.length;if(e<4){var t=Array(4-e).fill(null).map((function(){return function(){var e=[O(10,500),O(1e3,2e3)],t=e[0],n=e[1],c=O(0,100),a=g.findIndex((function(e){return c<=e})),r=y[a],i=r.points,o=r.scaleRatio;return{id:t+n,points:i,color:"rgb(".concat(O(0,255),", ").concat(O(0,255),", ").concat(O(0,255),")"),scaleRatio:o,pos:S(o),delay:t,lifeTime:n}}()}));f((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))}))}};Object(a.useEffect)((function(){var e=setInterval((function(){n&&f([]),t&&_()}),16.666666666666668);return function(){return clearInterval(e)}}),[d,t,n]);var w=d.map((function(e){return Object(a.createElement)(v,Object(j.a)(Object(j.a)({onClick:r},e),{},{key:e.id,freeze:!t,onDisappear:(n=e.id,function(){return f((function(e){return e.filter((function(e){return e.id!==n}))}))})}));var n}));return Object(c.jsx)(p.a,{xs:24,md:18,children:Object(c.jsx)(h.a,{bordered:!1,bodyStyle:{padding:"6px 12px"},children:Object(c.jsx)("section",{ref:i,className:"stage",children:w})})})},_=n(329),w=[{title:"Name",dataIndex:"name",key:"name",ellipsis:!0},{title:"Score",dataIndex:"score",key:"score",defaultSortOrder:"descend",sorter:function(e,t){return e.score-t.score}}],N=function(e){var t=e.data,n=void 0===t?[]:t;return Object(c.jsx)(p.a,{xs:24,md:6,children:Object(c.jsx)(h.a,{bordered:!1,bodyStyle:{padding:"6px 12px"},children:Object(c.jsx)("section",{id:"scores",className:"score-table",children:Object(c.jsx)(_.a,{columns:w,defaultPageSize:5,dataSource:n,bordered:!0,size:"small"})})})})},T=n(334),k=n(335),E=n(336),R=n(337),I=n(331),C=function(e){var t=e.start,n=void 0===t?0:t,r=e.end,i=void 0===r?60:r,o=e.onTimeOver,s=e.isActive,u=e.replay,d=Object(a.useState)(n),j=Object(l.a)(d,2),b=j[0],f=j[1];return Object(a.useEffect)((function(){u&&f(n),b===i&&(f(n),o())}),[b,u]),Object(a.useEffect)((function(){var e;return e=setInterval((function(){return function(e){s&&f((function(t){var c=t+(i<n?-1:1);return(i<n?c<i:c>i)?(clearInterval(e),i):c}))}(e)}),1e3),function(){return clearInterval(e)}}),[n,s]),Object(c.jsx)(I.a,{title:"Time:",value:b})},A=n(333),D=n(47),z=function(e){var t=e.onStart,n=e.onReplay,a=e.onEnd,r=e.replay,i=e.gameIsActive,o=e.score;return Object(c.jsx)("header",{className:"dashboard",children:Object(c.jsxs)(u.a,{gutter:32,children:[Object(c.jsx)(p.a,{xs:24,sm:12,md:8,children:Object(c.jsx)(h.a,{bordered:!1,bodyStyle:{padding:"6px 12px"},children:Object(c.jsxs)(A.b,{className:"dashboard__controls",children:[Object(c.jsx)(D.a,{onClick:t,type:"primary",icon:i?Object(c.jsx)(T.a,{}):Object(c.jsx)(k.a,{}),children:i?"Pause":"Play"}),Object(c.jsx)(D.a,{onClick:n,icon:Object(c.jsx)(E.a,{}),children:"Replay"}),Object(c.jsx)(D.a,{className:"dashboard__scores-link",href:"#scores",icon:Object(c.jsx)(R.a,{}),children:"Scores"})]})})}),Object(c.jsx)(p.a,{xs:12,sm:6,md:8,children:Object(c.jsx)(h.a,{bordered:!1,bodyStyle:{padding:"6px 12px"},children:Object(c.jsx)(I.a,{title:"Points:",value:o})})}),Object(c.jsx)(p.a,{xs:12,sm:6,md:8,children:Object(c.jsx)(h.a,{bordered:!1,bodyStyle:{padding:"6px 12px"},children:Object(c.jsx)(C,{start:60,end:0,isActive:i,onTimeOver:a,replay:r})})})]})})},P="scores",J=function(e){try{return JSON.parse(e)}catch(t){return JSON.stringify(e)}};function L(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(x),o=Object(l.a)(i,2),j=o[0],b=o[1],f=Object(a.useState)([]),O=Object(l.a)(f,2),m=O[0],v=O[1],p=Object(a.useState)(0),h=Object(l.a)(p,2),y=h[0],g=h[1],_=Object(a.useState)(!1),w=Object(l.a)(_,2),T=w[0],k=w[1],E=Object(a.useState)(!1),R=Object(l.a)(E,2),I=R[0],C=R[1];Object(a.useEffect)((function(){v(J(localStorage.getItem(P))||[])}),[]);var A=function(){I||(C(!0),k(!1),g(0))},D=function(){A(),r(!1)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(z,{score:y,gameIsActive:T,replay:I,onStart:function(){!function(){var e=window.location.href.split("#"),t=Object(l.a)(e,1)[0];window.history.replaceState(null,null,t)}(),k((function(e){return!e})),C(!1)},onReplay:A,onEnd:function(){r(!0)}}),Object(c.jsxs)(u.a,{gutter:{sm:16,md:24},className:"content",children:[Object(c.jsx)(S,{onScoreChange:function(e){return g((function(t){return e+t}))},isActive:T,shouldReplay:I}),Object(c.jsx)(N,{data:m})]}),Object(c.jsx)(d.a,{className:"modal",title:"Save result",visible:n,maskClosable:!1,closable:!1,onOk:function(){D();var e=j||x,t={key:(new Date).getTime(),name:e,score:y};v((function(e){var n=[].concat(Object(s.a)(e),[t]);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];localStorage.setItem(P,J(e))}(n),n}))},onCancel:D,children:Object(c.jsxs)("div",{className:"modal__inner",children:[Object(c.jsxs)("div",{className:"modal__score",children:[Object(c.jsx)("p",{className:"modal__text",children:"Youre score: "}),Object(c.jsx)("span",{children:y})]}),Object(c.jsx)("p",{className:"modal__text",children:"Name:"}),Object(c.jsx)("input",{className:"modal__input",value:j,maxLength:32,onChange:function(e){var t=e.target;return b(t.value.trim())}})]})})]})}o.a.render(Object(c.jsx)(L,{}),document.getElementById("root"))}},[[326,1,2]]]);
//# sourceMappingURL=main.ba6258b5.chunk.js.map